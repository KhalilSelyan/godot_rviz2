# SCsub

import os
Import('env')

ros_distro = "galactic"
cpp_version = "-std=c++17"
ros_include_path = "/opt/ros/" + ros_distro + "/include"
autoware_path = os.environ['COLCON_PREFIX_PATH']
ros_lib_path = "/opt/ros/" + ros_distro + "/lib"

# include package list
autoware_auto_planning_msgs = "autoware_auto_planning_msgs"
autoware_auto_perception_msgs = "autoware_auto_perception_msgs"
autoware_auto_vehicle_msgs = "autoware_auto_vehicle_msgs"
pcl_include_path = "/usr/include/pcl-1.10"
eigen3_include_path = "/usr/include/eigen3"


env.add_source_files(env.modules_sources, "src/*.cpp")
env.add_source_files(env.modules_sources, "register_types.cpp")

autoware_auto_planning_msgs_path = autoware_path + "/" + autoware_auto_planning_msgs
autoware_auto_perception_msgs_path = autoware_path+ "/" + autoware_auto_perception_msgs
autoware_auto_vehicle_msgs_path = autoware_path+ "/" + autoware_auto_vehicle_msgs

env.Append(CPPPATH=["include", 
                    ros_include_path, pcl_include_path,
                    eigen3_include_path,
                    autoware_auto_perception_msgs_path+"/include",
                    autoware_auto_planning_msgs_path+"/include",
                    autoware_auto_vehicle_msgs_path+"/include"])

env.Append(LIBPATH=[ros_lib_path, 
                    ros_lib_path+"/x86_64-linux-gnu",
                    autoware_auto_perception_msgs_path+"/lib",
                    autoware_auto_planning_msgs_path+"/lib",
                    autoware_auto_vehicle_msgs_path+"/lib"])

env.Append(CCFLAGS=[cpp_version])

env.Append(
    LIBS=[
        'rclcpp',
        'rcl',
        'rcl_yaml_param_parser',
        'rcutils',
        'rcpputils',
        'rmw',
        'rmw_implementation',
        'tracetools',
        'ament_index_cpp',
        'std_msgs__rosidl_typesupport_cpp',
        'sensor_msgs__rosidl_typesupport_cpp',
        'rosidl_typesupport_cpp',
        'rosidl_typesupport_c',
        'rosidl_runtime_c',
        'console_bridge',
        'rcl_action',
        'rclcpp_action',
        'actionlib_msgs__rosidl_typesupport_cpp',
        'action_msgs__rosidl_typesupport_cpp',
        'tf2',
        'tf2_ros',
        'tf2_msgs__rosidl_typesupport_cpp',
        'visualization_msgs__rosidl_typesupport_cpp',
        'console_bridge',
        autoware_auto_planning_msgs + '__rosidl_typesupport_cpp',
        autoware_auto_perception_msgs + '__rosidl_typesupport_cpp',
        autoware_auto_vehicle_msgs + '__rosidl_typesupport_cpp',
        'liblibstatistics_collector',
        'pcl_ros_tf', 
        'statistics_msgs__rosidl_typesupport_cpp',
        'rosgraph_msgs__rosidl_typesupport_cpp',
        'rcl_interfaces__rosidl_typesupport_cpp',
        'rcl_interfaces__rosidl_typesupport_c',
        'rcl_interfaces__rosidl_generator_c',
        'rcl_logging_interface',
        'rcl_logging_spdlog',
        'builtin_interfaces__rosidl_generator_c'])
